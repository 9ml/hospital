<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>心电监护仪数据表格</title>
    <link rel="stylesheet" type="text/css" href="../../../../static/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="../../../../static/css/admin.css"/>
    <script src="../../../../static/js/jquery-3.3.1.min.js" type="text/javascript" charset="utf-8"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="../../../../static/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="../../../../static/layui/layui.js"></script>
    <style>
        h2 {
            text-align: center;
            margin-top: 30px;
        }

        td p {
            font-weight: bold;
        }

        td {
            text-align: center;
        }

        .btn {
            width: 100%;
            margin-top: 50px;
            margin-bottom: 30px;
            text-align: center;
        }
    </style>
</head>
<body>
<div class="layui-row">
    <div class="col-xs-12">
        <fieldset class="layui-elem-field layui-field-title">
            <legend style="color: #000000;font-weight: bold;text-align: center;margin-bottom: 30px;">多参数监护仪质量检测原始记录表(成人)</legend>
        </fieldset>
        <table class="layui-table">
            <tr>
                <th rowspan="2" scope="row">心率(次/min)</th>
                <td>设定值</td>
                <td id="xlTest1"><!--30--></td>
                <td id="xlTest2"><!--60--></td>
                <td id="xlTest3"><!--100--></td>
                <td id="xlTest4"><!--120--></td>
                <td id="xlTest5"><!--180--></td>
                <td id="xlTest6"><!--200--></td>
                <td id="xlWc"> <!--允许误差： ± 5%--> </td>
            </tr>
            <tr>
                <td>显示值</td>
                <td id="xlValue1">&nbsp;</td>
                <td id="xlValue2">&nbsp;</td>
                <td id="xlValue3">&nbsp;</td>
                <td id="xlValue4">&nbsp;</td>
                <td id="xlValue5">&nbsp;</td>
                <td id="xlValue6">&nbsp;</td>
                <td id="xlValues"></td>
            </tr>
            <tr>
                <th rowspan="2" scope="row">呼吸频率(次/min)</th>
                <td>设定值</td>
                <td id="hxlTest1"><!--8--></td>
                <td id="hxlTest2"><!--15--></td>
                <td id="hxlTest3"><!--20--></td>
                <td id="hxlTest4"><!--40--></td>
                <td id="hxlTest5"><!--60--></td>
                <td id="hxlTest6"><!--80--></td>
                <td id="hxlWc"> <!--允许误差： ± 5% --></td>
            </tr>
            <tr>
                <td>显示值</td>
                <td id="hxlValue1">&nbsp;</td>
                <td id="hxlValue2">&nbsp;</td>
                <td id="hxlValue3">&nbsp;</td>
                <td id="hxlValue4">&nbsp;</td>
                <td id="hxlValue5">&nbsp;</td>
                <td id="hxlValue6">&nbsp;</td>
                <td id="hxlValues"></td>
            </tr>
            <tr>
                <th rowspan="2" scope="row">血氧饱和度(%)</th>
                <td>设定值</td>
                <td id="xybhdTest1"><!--70--></td>
                <td id="xybhdTest2"><!--80--></td>
                <td id="xybhdTest3"><!--90--></td>
                <td id="xybhdTest4"><!--95--></td>
                <td id="xybhdTest5"><!--100--></td>
                <td></td>
                <td id="xybhdWc"> <!--允许误差： ± 3% --></td>
            </tr>
            <tr>
                <td>显示值</td>
                <td id="xybhdValue1">&nbsp;</td>
                <td id="xybhdValue2">&nbsp;</td>
                <td id="xybhdValue3">&nbsp;</td>
                <td id="xybhdValue4">&nbsp;</td>
                <td id="xybhdValue5">&nbsp;</td>
                <td></td>
                <td id="xybhdValues"></td>
            </tr>
            <tr>
                <th id="wcxyjtSd" rowspan="4" scope="row"><p>无创血压静态示值误差(mmHg)</p></th>
                <td>设定值</td>
                <td id="wcxyJtTest1"><!--10--></td>
                <td id="wcxyJtTest2"><!--50--></td>
                <td id="wcxyJtTest3"><!--100--></td>
                <td id="wcxyJtTest4"><!--150--></td>
                <td id="wcxyJtTest5"><!--250--></td>
                <td></td>
                <td id="wcxyJtWc" rowspan="2"><!--允许误差： 首次检测:±3mmHg 使用中检测:±4mmHg --></td>
            </tr>
            <tr>
                <td>显示值1</td>
                <td id="wcxyJtXsz1Value1">&nbsp;</td>
                <td id="wcxyJtXsz1Value2">&nbsp;</td>
                <td id="wcxyJtXsz1Value3">&nbsp;</td>
                <td id="wcxyJtXsz1Value4">&nbsp;</td>
                <td id="wcxyJtXsz1Value5">&nbsp;</td>
                <td></td>
            </tr>
            <tr>
                <td>显示值2</td>
                <td id="wcxyJtXsz2Value1">&nbsp;</td>
                <td id="wcxyJtXsz2Value2">&nbsp;</td>
                <td id="wcxyJtXsz2Value3">&nbsp;</td>
                <td id="wcxyJtXsz2Value4">&nbsp;</td>
                <td id="wcxyJtXsz2Value5">&nbsp;</td>
                <td></td>
                <td rowspan="2" id="wcxyJtValues"></td>
            </tr>
            <tr>
                <td>平均值</td>
                <td id="wcxyJtXAvgValue1">&nbsp;</td>
                <td id="wcxyJtXAvgValue2">&nbsp;</td>
                <td id="wcxyJtXAvgValue3">&nbsp;</td>
                <td id="wcxyJtXAvgValue4">&nbsp;</td>
                <td id="wcxyJtXAvgValue5">&nbsp;</td>
                <td></td>
            </tr>
            <tr>
                <th rowspan="2" scope="row">无创动态血压重复性(mmHg)</th>
                <td>设定值</td>
                <td scope="col" colspan="5"><span id="wcdtxySdzTest1"></span>mmHg/<span id="wcdtxySdzTest2"></span>mmHg，心率：<span id="wcdtxyXl"></span>次/min<!--75/45(55)--></td>
                <td rowspan="1">五次显示值最大值与最小值差值</td>
                <td id="wcdtxyWc"></td>
            </tr>
            <tr>
                <td>5次显示值</td>
                <td>1:<span id="wcdtxyValue1"></span></td>
                <td>2:<span id="wcdtxyValue2"></span></td>
                <td>3:<span id="wcdtxyValue3"></span></td>
                <td>4:<span id="wcdtxyValue4"></span></td>
                <td>5:<span id="wcdtxyValue5"></span></td>
                <td>收缩压(R收)：<span style="display: inline-block;width:50px;"></span>舒张压(R舒)：</td>
                <td id="wcdtxyValues"></td>
            </tr>
            <tr>
                <th rowspan="3" scope="row">气密性检测</th>
                <td>压力点</td>
                <td colspan="3" id="qmxjcYldTest1"></td>
                <td colspan="3" id="qmxjcYldTest2"></td>
                <td id="qmxjcWc"></td>
            </tr>
            <tr>
                <td colspan="1">压力示值</td>
                <td colspan="1">1min（P1min）:</td>
                <td colspan="2">5min（P5min）:</td>
                <td colspan="1">1min（P1min）:</td>
                <td colspan="2">5min（P5min）:</td>
                <td rowspan="2" id="qmxjcValues"></td>
            </tr>
            <tr>
                <td colspan="1">气密性数值</td>
                <td colspan="3"></td>
                <td colspan="3"></td>
            </tr>
            <tr>
                <th scope="row">声光报警</th>
                <td id="sgbjResult" colspan="2"></td>
                <td>报警限检查</td>
                <td id="bjxjcResult" colspan="2"></td>
                <td>静音检查</td>
                <td id="jyjcResult" colspan="2"></td>
            </tr>
        </table>
        <fieldset class="layui-elem-field layui-field-title">
            <legend style="color: #000000;font-weight: bold;">检测人信息</legend>
        </fieldset>
        <table class="layui-hide" id="testerInfo"></table>
        <div class="col-xs-12 btn">
            <a id="update" class="layui-btn">修改</a>
            <!--<a id="back" class="layui-btn">暂不上传</a>
            <button id="upload" class="layui-btn layui-btn-normal">上传</button>-->
        </div>
    </div>
</div>
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-container">
    </div>
</script>
<script>
    // 获取上个页面传递的类型
    var type = window.location.search;
    var ids = parseInt(type.split("=")[1]);
    var thiseqId = parseInt(sessionStorage['thiseqId']);
    // var thisjcyqId = parseInt(sessionStorage['thisjcyqId']);
    var thissjId = parseInt(sessionStorage['thissjId']);
    var thisId = parseInt(sessionStorage['thisId']);
    var dqSb = sessionStorage['dqSb'];
    $(function () {
        sessionStorage['lifeSb'] = 1;
        $.ajax({
            url: "/jhy/findByDcidM?dcid=" + ids,
            method: "GET",
            dataType: "JSON",
            success: function (res) {
                console.log(res);
                if (res.data != null && res.data != "") {
                    // 心率(次/min)
                    $("#xlTest1").append(res.data.xlTest1);
                    $("#xlTest2").append(res.data.xlTest2);
                    $("#xlTest3").append(res.data.xlTest3);
                    $("#xlTest4").append(res.data.xlTest4);
                    $("#xlTest5").append(res.data.xlTest5);
                    $("#xlTest6").append(res.data.xlTest6);
                    $("#xlWc").append(res.data.xlWc);
                    $("#xlValue1").append(res.data.xlValue1);
                    $("#xlValue2").append(res.data.xlValue2);
                    $("#xlValue3").append(res.data.xlValue3);
                    $("#xlValue4").append(res.data.xlValue4);
                    $("#xlValue5").append(res.data.xlValue5);
                    $("#xlValue6").append(res.data.xlValue6);
                    if (res.data.xlResult) {
                        $("#xlValues").append("<p style='color:green;'>符合</p>")
                    } else {
                        $("#xlValues").append("<p style='color:red;'>不符合</p>")
                    }
                    // 呼吸率(次/min)
                    $("#hxlTest1").append(res.data.hxlTest1);
                    $("#hxlTest2").append(res.data.hxlTest2);
                    $("#hxlTest3").append(res.data.hxlTest3);
                    $("#hxlTest4").append(res.data.hxlTest4);
                    $("#hxlTest5").append(res.data.hxlTest5);
                    $("#hxlTest6").append(res.data.hxlTest6);
                    $("#hxlWc").append(res.data.hxlWc);
                    $("#hxlValue1").append(res.data.hxlValue1);
                    $("#hxlValue2").append(res.data.hxlValue2);
                    $("#hxlValue3").append(res.data.hxlValue3);
                    $("#hxlValue4").append(res.data.hxlValue4);
                    $("#hxlValue5").append(res.data.hxlValue5);
                    $("#hxlValue6").append(res.data.hxlValue6);
                    if (res.data.hxlResult) {
                        $("#hxlValues").append("<p style='color:green;'>符合</p>")
                    } else {
                        $("#hxlValues").append("<p style='color:red;'>不符合</p>")
                    }

                    // 血氧饱和度(%)
                    $("#xybhdTest1").append(res.data.xybhdTest1);
                    $("#xybhdTest2").append(res.data.xybhdTest2);
                    $("#xybhdTest3").append(res.data.xybhdTest3);
                    $("#xybhdTest4").append(res.data.xybhdTest4);
                    $("#xybhdTest5").append(res.data.xybhdTest5);
                    $("#xybhdWc").append(res.data.xybhdWc + "%");
                    $("#xybhdValue1").append(res.data.xybhdValue1);
                    $("#xybhdValue2").append(res.data.xybhdValue2);
                    $("#xybhdValue3").append(res.data.xybhdValue3);
                    $("#xybhdValue4").append(res.data.xybhdValue4);
                    $("#xybhdValue5").append(res.data.xybhdValue5);
                    if (res.data.xybhdResult) {
                        $("#xybhdValues").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#xybhdValues").append("<p style='color:red;'>不符合</p>");
                    }
                    //无创血压静态
                    $("#wcxyJtTest1").append(res.data.wcxyJtTest1);
                    $("#wcxyJtTest2").append(res.data.wcxyJtTest2);
                    $("#wcxyJtTest3").append(res.data.wcxyJtTest3);
                    $("#wcxyJtTest4").append(res.data.wcxyJtTest4);
                    $("#wcxyJtTest5").append(res.data.wcxyJtTest5);
                    $("#wcxyJtWc").append("首次检测：" + res.data.wcxyScWc + "mmHg 使用中检测: " + res.data.wcxySyzWc + "mmHg");
                    $("#wcxyJtXsz1Value1").append(res.data.wcxyJtXsz1Value1 || 0);
                    $("#wcxyJtXsz1Value2").append(res.data.wcxyJtXsz1Value2 || 0);
                    $("#wcxyJtXsz1Value3").append(res.data.wcxyJtXsz1Value3 || 0);
                    $("#wcxyJtXsz1Value4").append(res.data.wcxyJtXsz1Value4 || 0);
                    $("#wcxyJtXsz1Value5").append(res.data.wcxyJtXsz1Value5 || 0);
                    $("#wcxyJtXsz2Value1").append(res.data.wcxyJtXsz2Value1 || 0);
                    $("#wcxyJtXsz2Value2").append(res.data.wcxyJtXsz2Value2 || 0);
                    $("#wcxyJtXsz2Value3").append(res.data.wcxyJtXsz2Value3 || 0);
                    $("#wcxyJtXsz2Value4").append(res.data.wcxyJtXsz2Value4 || 0);
                    $("#wcxyJtXsz2Value5").append(res.data.wcxyJtXsz2Value5 || 0);
                    $("#wcxyJtXAvgValue1").append(((res.data.wcxyJtXsz1Value1 || 0) + (res.data.wcxyJtXsz2Value1 || 0)) / 2);
                    $("#wcxyJtXAvgValue2").append(((res.data.wcxyJtXsz1Value2 || 0) + (res.data.wcxyJtXsz2Value2 || 0)) / 2);
                    $("#wcxyJtXAvgValue3").append(((res.data.wcxyJtXsz1Value3 || 0) + (res.data.wcxyJtXsz2Value3 || 0)) / 2);
                    $("#wcxyJtXAvgValue4").append(((res.data.wcxyJtXsz1Value4 || 0) + (res.data.wcxyJtXsz2Value4 || 0)) / 2);
                    $("#wcxyJtXAvgValue5").append(((res.data.wcxyJtXsz1Value5 || 0) + (res.data.wcxyJtXsz2Value5 || 0)) / 2);
                    if (res.data.wcxyJtResult) {
                        $("#wcxyJtValues").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#wcxyJtValues").append("<p style='color:red;'>不符合</p>");
                    }
                    //无创动态血压重复性(mmHg)
                    $("#wcdtxySdzTest1").append(res.data.wcdtxySdzTest1);
                    $("#wcdtxySdzTest2").append(res.data.wcdtxySdzTest2);
                    $("#wcdtxyXl").append(res.data.wcdtxyXl);
                    $("#wcdtxyValue1").append(res.data.wcdtxyValue1);
                    $("#wcdtxyValue2").append(res.data.wcdtxyValue2);
                    $("#wcdtxyValue3").append(res.data.wcdtxyValue3);
                    $("#wcdtxyValue4").append(res.data.wcdtxyValue4);
                    $("#wcdtxyValue5").append(res.data.wcdtxyValue5);
                    $("#wcdtxyWc").append(res.data.wcdtxyWc);
                    if (res.data.wcdtxyResult) {
                        $("#wcdtxyValues").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#wcdtxyValues").append("<p style='color:red;'>不符合</p>");
                    }

                    //气密性
                    $("#qmxjcYldTest1").append(res.data.qmxjcYldTest1);
                    $("#qmxjcYldTest2").append(res.data.qmxjcYldTest2);
                    $("#qmxjcYlszValue1").append(res.data.qmxjcYlszValue1);
                    $("#qmxjcYlszValue2").append(res.data.qmxjcYlszValue2);
                    $("#qmxjcYlszValue3").append(res.data.qmxjcYlszValue3);
                    $("#qmxjcYlszValue4").append(res.data.qmxjcYlszValue4);
                    $("#qmxjcQmxszValue1").append(res.data.qmxjcQmxszValue1);
                    $("#qmxjcQmxszValue2").append(res.data.qmxjcQmxszValue2);
                    $("#qmxjcWc").append(res.data.qmxjcWc + "mmHg/min");
                    if (res.data.qmxjcResult) {
                        $("#qmxjcValues").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#qmxjcValues").append("<p style='color:red;'>不符合</p>");
                    }
                    // 声光警报
                    if (res.data.sgbjResult == 1) {
                        $("#sgbjResult").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#sgbjResult").append("<p style='color:red;'>不符合</p>");
                    }
                    // 报警限检查
                    if (res.data.bjxjcResult == 1) {
                        $("#bjxjcResult").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#bjxjcResult").append("<p style='color:red;'>不符合</p>");
                    }
                    // 静音检查
                    if (res.data.jyjcResult == 1) {
                        $("#jyjcResult").append("<p style='color:green;'>符合</p>");
                    } else {
                        $("#jyjcResult").append("<p style='color:red;'>不符合</p>");
                    }
                } else {
                    layer.msg("无数据");
                }
            }
        })
    });
    //Demo
    layui.use(['table', 'layer', 'jquery'], function () {
        var table = layui.table
            , layer = layui.layer
            , $ = layui.jquery;
        table.render({
            elem: "#testerInfo",
            cellMinWidth: 100,
            toolbar: '#toolbarDemo',
            url: "/jhy/findByDcidM?dcid=" + ids,
            method: "GET",
            response: {
                statusName: 'status'
                , statusCode: 200
                , msgName: 'hint'
                , countName: 'total'
                , dataName: 'data'
            },
            parseData: function (res) {
                console.log(res.data);
                return {
                    "status": 200
                    , "msg": res.message
                    , "count": res.total
                    , "data": [res.data]
                }
            },
            cols: [[
                {field: 'tester', title: '检测人', align: 'center'},
                {field: 'testTime', title: '检测时间', align: 'center'},
                {field: 'jcsm', title: '检测情况说明', align: 'center'}
            ]]
        });
        // 上传
        $("#upload").click(function () {
            $.ajax({
                url: "/dqjc/updateState?yqEqId=" + thissjId + "&userEqId=" + thisId,
                method: "POST",
                success: function (res) {
                    if (res.state === 200) {
                        layer.msg("上传成功，请耐心等待管理员审核");
                        setTimeout(function () {
                            if (dqSb == 1) {
                                location.href = "/control/home/home.html";
                            } else {
                                location.href = "/control/home/waiting/check_info.html?id=" + thiseqId;
                            }
                        }, 1000)
                    } else {
                        layer.msg("上传失败");
                    }
                },
                error: function (data) {
                    layer.msg("上传失败,请稍后再试");
                    console.log(data);
                }
            })
        });
        // 修改
        $("#update").click(function () {
            location.href = "/control/home/waiting/update/write_life_man.html?id=" + ids;
        });
        // 返回
        $("#back").click(function () {
            if (dqSb == 1) {
                location.href = "/control/home/home.html";
            } else {
                location.href = "/control/home/waiting/check_info.html?id=" + thiseqId;
            }
        })
    })
</script>
</body>

</html>